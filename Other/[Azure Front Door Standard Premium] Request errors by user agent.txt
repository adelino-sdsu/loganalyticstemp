// [Azure Front Door Standard/Premium] Request errors by user agent 
// Count number of requests with error responses by user agent. Summarize number of requests per user agent and status codes >= 400. 
AzureDiagnostics
| where ResourceProvider == "MICROSOFT.CDN" and Category == "FrontDoorAccessLog"
| where toint(httpStatusCode_s) >= 400
| summarize RequestCount = count() by UserAgent = userAgent_s, StatusCode = httpStatusCode_s , Resource, ResourceId
| order by RequestCount desc